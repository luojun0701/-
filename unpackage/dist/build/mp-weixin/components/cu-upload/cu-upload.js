"use strict";var e=require("../../common/vendor.js");if(!Array){(e.resolveComponent("cu-image")+e.resolveComponent("cu-icon"))()}Math||((()=>"../cu-image/cu-image.js")+(()=>"../cu-icon/cu-icon.js"))();const o={__name:"cu-upload",props:{maxCount:{type:[Number,String],default:9}},setup(o,{expose:a}){const n=o,t=e.ref([]);e.ref([]);const i=()=>{e.index.chooseMedia({count:n.maxCount,mediaType:["image"],sizeType:["compressed"],success:({tempFiles:o})=>{t.value.length+o.length>n.maxCount?e.index.showToast({title:`图片总数不能超过${n.maxCount}张`,icon:"none"}):t.value=t.value.concat(o.map((e=>e.tempFilePath)))}})};return a({upload:()=>new Promise((o=>{e.index.showLoading({title:"上传中"});let a=[];t.value.forEach(((o,n)=>{let t=new Promise(((a,n)=>{a(e.pn.uploadFile({filePath:o,cloudPath:"lbotao-"+(new Date).getTime()/1e3}))}));a.push(t)})),Promise.all(a).then((a=>{let n=[];a.forEach((e=>{n.push(e.fileID)})),e.index.hideLoading(),o(n)}))}))}),(a,n)=>e.e({a:e.f(t.value,((o,a,n)=>({a:"1c595508-0-"+n,b:e.p({src:o,width:"220rpx",height:"220rpx",radius:"4rpx",previewSrcList:t.value,initialIndex:a}),c:"1c595508-1-"+n,d:e.o((e=>(e=>{t.value.splice(e,1)})(a))),e:e.s((a+1)%3==0?"margin:0 0 15rpx 0":"")}))),b:e.p({name:"shanchu",color:"#fff",size:"10px"}),c:t.value.length<o.maxCount},t.value.length<o.maxCount?{d:e.p({name:"camera",color:"rgb(211, 212, 214)"}),e:e.o(i)}:{})}};wx.createComponent(o);
